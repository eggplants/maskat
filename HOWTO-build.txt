
マスカットフレームワーク
HOWTO-build.txt - ビルド方法について

最終更新日: 2009/3/30

マスカットプロジェクト
http://maskat.sourceforge.jp/


 1.概要
───────────────────────────────────

マスカットフレームワークは Web ブラウザ上で動作するリッチクライアント
アプリケーションのための実行環境および開発フレームワークです。

このファイルでは、マスカットフレームワークをソースコードからビルドする
方法を説明します。


 2.前提条件
───────────────────────────────────

マスカットフレームワークのビルドには以下の開発ツールが必要です。

2.1 Java 実行環境 (JRE) もしくは開発環境 (JDK)

JRE 1.4.2 以降がインストールされており、環境変数 JAVA_HOME が適切に設
定されていること。JRE および JDK は下記の URL から入手可能です。

  http://www.java.com/ja/download/

  
2.2 ビルドツール (Apache Ant)

Apache Ant 1.6.0 以降がインストールされており、環境変数 ANT_HOME が適
切に設定されていること。Apaceh Ant は以下の URL から入手可能です:

  http://ant.apache.org/    
	

 3.フォルダ構成
───────────────────────────────────

マスカットフレームワークのソースフォルダの構成は以下のとおりです。

maskat
├─core               : マスカットフレームワーク・コア
├─dist               : 配布アーカイブの作成先フォルダ
├─doc                : API ドキュメントの出力先フォルダ
├─lib                : ビルド環境として利用する外部ライブラリ
│  ├─ant-contrib    :   Ant-Contrib
│  ├─jsdoc-toolkit  :   JsDoc Toolkit
│  └─yuicompressor  :   YUI Compressor
├─plugin             : プラグイン
│  ├─compat         :   マスカット 1.x 互換性プラグイン
│  ├─google         :   Google 部品ライブラリ
│  ├─html           :   HTML 部品ライブラリ
│  ├─livevalidation :   LiveValidation プラグイン
│  ├─log4javascript :   log4javascript プラグイン
│  └─rialto         :   Rialto 部品ライブラリ
└─sample             : サンプルアプリケーション
    ├─calculation    :   四則演算
    ├─fruitshop      :   フルーツショップ
    ├─gourmet        :   レストラン検索
    └─petstore       :   ペットストア


 4.ビルド方法
───────────────────────────────────

4.1 ant コマンドの実行方法

ソースフォルダのディレクトリに移動し、ant コマンドの引数としてターゲッ
ト名を入力してください。ソースフォルダを C:\maskat に展開した場合の
ant コマンド実行例を以下に示します:

  C:\maskat> ant build


4.2 定義済みのターゲット

マスカットフレームワークのビルド定義ファイル (build.xml) には、以下の
公開ターゲットが定義されています。

  1) all

  マスカットフレームワーク本体、プラグイン、サンプル、API ドキュメント
  をすべてビルドします。
  
  2) build
  
  マスカットフレームワークをソースコードからビルドします。src フォルダ
  には 1 クラスにつき 1 つの JavaScript ファイル (*.js) が含まれており、
  これらのファイルはビルド操作によって単一のファイルに結合されます。

  2) dist

  マスカットの配布アーカイブ (ZIP ファイル) を作成します。ファイル名は
  以下の規則に従って生成されます:

    maskat-{バージョン識別子}.v{日付}.zip、

  バージョン識別子は build.properties ファイルの maskat.version プロパ
  ティで指定してください。日付はビルドを行った日が YYYYMMDD 形式で自動
  的に付与されます。
  
  3) deploy

  指定したフォルダにビルドされたフレームワークとサンプルアプリケーショ
  ンをコピーします。コピー先は build.properties ファイルの deploy プロ
  パティで変更可能です。

  4) jsdoc

  マスカットフレームワークの API ドキュメントを生成します。ドキュメン
  トは HTML 形式で doc フォルダ内に出力されます。 

  5) clean

  ビルド時に生成されたフォルダやファイルを削除します。

その他のターゲットについては、ant コマンドに -p オプションを指定すると
ヘルプが表示されます。


以上

───────────────────────────────────
Copyright(C) 2006-2011 マスカットプロジェクト